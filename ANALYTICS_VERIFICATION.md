# アナリティクス動作確認ガイド

## ✅ Step 1: 測定ID設置の確認

### 1.1 コードの存在確認
各ページのソースコードに以下があることを確認：

```html
<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YOUR-ACTUAL-ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-YOUR-ACTUAL-ID');
</script>
```

### 1.2 ブラウザ開発者ツールでの確認
1. **Chrome/Edge**: F12 → Network タブ
2. **サイトにアクセス**
3. **フィルター**: `gtag` または `google-analytics`
4. **確認**: `gtag/js?id=G-YOUR-ID` のリクエストが発生

### 1.3 エラー確認
**Console タブ**でエラーが出ていないか確認：
```
✅ Good: エラーなし
❌ Bad: "gtag is not defined" などのエラー
```

## 🔍 Step 2: リアルタイム動作テスト

### 2.1 基本テスト手順
1. **GA4管理画面** → リアルタイム レポートを開く
2. **別タブ/デバイス**でサイトにアクセス
3. **30秒〜1分待機**
4. **リアルタイムユーザー数**が1増加することを確認

### 2.2 複数ページテスト
```
テストシナリオ:
1. メインページにアクセス
2. 記事1をクリック
3. 記事2に移動
4. 関連記事をクリック
```

**GA4での確認内容**:
- アクティブユーザー数の変化
- アクティブページの変化
- ページビュー数の増加

### 2.3 デバイス別テスト
```
✅ PC（Chrome）でアクセス
✅ スマホ（Safari）でアクセス  
✅ タブレットでアクセス
```

各デバイスでリアルタイムレポートに反映されることを確認

## 📊 Step 3: データ蓄積の確認（24時間後）

### 3.1 基本指標の確認
**ホームダッシュボード**で以下を確認：
```
✅ ユーザー数 > 0
✅ セッション数 > 0  
✅ ページビュー数 > 0
✅ 平均セッション継続時間 > 0秒
```

### 3.2 ページ別データの確認
**ページとスクリーン**レポートで：
```
✅ index.html（メインページ）のデータあり
✅ 各記事ページのデータあり
✅ ページタイトルが正しく表示
```

### 3.3 地域・デバイスデータ
```
✅ 地域データ（Japan表示）
✅ デバイスカテゴリ（mobile/desktop）
✅ OS情報（iOS/Android/Windows）
```

## 🛠️ よくある問題と解決法

### ❌ 問題1: リアルタイムで反映されない

**原因と解決法**:
```
🔍 測定ID間違い
→ G-MEASUREMENT_ID が残っていないか確認

🔍 AdBlocker影響  
→ プライベートモードでテスト

🔍 キャッシュ問題
→ Ctrl+F5でハードリフレッシュ

🔍 ネットワーク遅延
→ 2-3分待ってから再確認
```

### ❌ 問題2: 一部ページでデータなし

**確認項目**:
```
✅ 該当ページにGAコードがあるか
✅ HTMLの記述エラーがないか
✅ JavaScript実行エラーがないか
```

**解決コマンド（全ページ再確認）**:
```bash
# 全HTMLファイルでGA4コードの存在確認
grep -l "gtag.*config" *.html articles/*.html

# 測定IDが正しく設定されているか確認  
grep "G-" *.html articles/*.html
```

### ❌ 問題3: データが24時間後も表示されない

**段階的確認**:
```
1. GA4プロパティ設定の確認
   → データストリームが正しく設定されているか

2. フィルターの確認
   → IPアドレス除外設定がされていないか
   
3. サンプリング設定
   → データ処理の遅延がないか
```

## 🎯 高度な確認方法

### Google Tag Assistant 使用
1. **Chrome拡張機能**をインストール
2. **Tag Assistant Legacy**で動作確認
3. **GA4タグ**が正しく発火しているか確認

### GA4 DebugView 使用  
1. **GA4管理画面** → 設定 → DebugView
2. **debug_mode**パラメータ付きでアクセス
3. **リアルタイムイベント**の詳細確認

### Chrome DevTools Network確認
```
期待されるリクエスト:
✅ https://www.googletagmanager.com/gtag/js?id=G-***
✅ https://www.google-analytics.com/g/collect?*** 
✅ Status: 200 OK
```

## 📈 成功指標

### 初期設置成功の判断基準
```
✅ リアルタイムレポートで即座に反映
✅ 24時間以内に基本データ蓄積開始
✅ 7日間でユーザー行動パターン見える化
✅ 1ヶ月でトレンド分析可能
```

### 継続的モニタリング項目
```
📊 毎日: リアルタイムユーザー数
📊 毎週: ユーザー数・ページビュー推移  
📊 毎月: 詳細レポート・前月比較
📊 毎季: 季節性分析・年間計画調整
```

## 🚨 緊急時の対応

### データが突然止まった場合
1. **サイト側要因**: コード削除・HTML変更ミス
2. **GA4側要因**: アカウント停止・設定変更
3. **技術的要因**: CDN問題・DNS問題

### 対応手順
```
1. リアルタイムレポートで現状確認
2. ブラウザ開発者ツールでネットワーク確認
3. HTML実装の再確認
4. 必要に応じて測定ID再設定
```

アナリティクスが正常に動作していれば、サイトの成長と読者の興味を数値で把握できるようになります！